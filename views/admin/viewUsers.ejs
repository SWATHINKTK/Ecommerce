<%- include('../partials/header.ejs') %>
    <div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body  mt-5">
        <h4 class="card-title text-center">View Users&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h4>
        <div class="d-grid gap-4 d-md-flex justify-content-md-end mb-2">
          <input type="text" class="form-control col-3 mr-2" id="categorySearch" placeholder="Category Search" name="categorySearch" value="<%= locals.search ? search : '' %>">
          <button type="button" class="btn btn-outline-primary" onclick="search()"><i class="bi bi-search"></i></button>
        </div>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>Username</th>
                <th>email</th>
                <th>PhoneNumber</th>
                <th>Joined_Date</th>
                <th>Verification</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody class="text-white">
              <% if(data.length) { %>
              <% for(let i=0;i<data.length;i++){ %>
              <tr>
                <td><%= i+1 %></td>
                <td><%= data[i].username %></td>
                <td><%= data[i].email %></td>
                <td><%= data[i].phonenumber %></td>
                <td><%= data[i].joined_date %></td>
                <td><%= data[i]._isVerified ? 'Verfied' : 'NotVerified'%></td>
                <% if(data[i].block) {%>
                  <td id="<%= data[i]._id %>"><button class="btn  btn-outline-danger pl-3 pr-3" id="<%= data[i]._id %>" onclick="categoryList(this)">Block</button></td>
                <% } else { %>
                  <td id="<%= data[i]._id %>"><button class="btn btn-outline-success pl-4 pr-4" id="<%= data[i]._id %>" onclick="categoryList(this)">Unblock</button></td>
                <% } %>
              </tr>
              <% } }else {%>
                <tr class="bg-danger">
                  <th class="text-dark" colspan="5">USER IS NOT FOUND</th>
                </tr> 
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
<%- include('../partials/footer.ejs') %>